{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\VASILISVITTIS\\\\Documents\\\\main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\VASILISVITTIS\\\\Documents\\\\main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\VASILISVITTIS\\\\Documents\\\\main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\VASILISVITTIS\\\\Documents\\\\main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\VASILISVITTIS\\\\Documents\\\\main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\VASILISVITTIS\\\\Documents\\\\main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Web3 from'web3';import DaiToken from'../abis/DaiToken.json';import DappToken from'../abis/DappToken.json';import TokenFarm from'../abis/TokenFarm.json';import Navbar from'./Navbar';import Main from'./Main';import'./App.css';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.stakeTokens=function(amount){_this.setState({loading:true});_this.state.daiToken.methods.approve(_this.state.tokenFarm._address,amount).send({from:_this.state.account}).on('transactionHash',function(hash){_this.state.tokenFarm.methods.stakeTokens(amount).send({from:_this.state.account}).on('transactionHash',function(hash){_this.setState({loading:false});});});};_this.unstakeTokens=function(amount){_this.setState({loading:true});_this.state.tokenFarm.methods.unstakeTokens().send({from:_this.state.account}).on('transactionHash',function(hash){_this.setState({loading:false});});};_this.state={account:'0x0',daiToken:{},dappToken:{},tokenFarm:{},daiTokenBalance:'0',dappTokenBalance:'0',stakingBalance:'0',loading:true};return _this;}_createClass(App,[{key:\"componentWillMount\",value:function(){var _componentWillMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.loadWeb3();case 2:_context.next=4;return this.loadBlockchainData();case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentWillMount(){return _componentWillMount.apply(this,arguments);}return componentWillMount;}()},{key:\"loadBlockchainData\",value:function(){var _loadBlockchainData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var web3,accounts,networkId,daiTokenData,daiToken,daiTokenBalance,dappTokenData,dappToken,dappTokenBalance,tokenFarmData,tokenFarm,stakingBalance;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:web3=window.web3;_context2.next=3;return web3.eth.getAccounts();case 3:accounts=_context2.sent;this.setState({account:accounts[0]});_context2.next=7;return web3.eth.net.getId();case 7:networkId=_context2.sent;// Load DaiToken\ndaiTokenData=DaiToken.networks[networkId];if(!daiTokenData){_context2.next=18;break;}daiToken=new web3.eth.Contract(DaiToken.abi,daiTokenData.address);this.setState({daiToken:daiToken});_context2.next=14;return daiToken.methods.balanceOf(this.state.account).call();case 14:daiTokenBalance=_context2.sent;this.setState({daiTokenBalance:daiTokenBalance.toString()});_context2.next=19;break;case 18:window.alert('DaiToken contract not deployed to detected network.');case 19:// Load DappToken\ndappTokenData=DappToken.networks[networkId];if(!dappTokenData){_context2.next=29;break;}dappToken=new web3.eth.Contract(DappToken.abi,dappTokenData.address);this.setState({dappToken:dappToken});_context2.next=25;return dappToken.methods.balanceOf(this.state.account).call();case 25:dappTokenBalance=_context2.sent;this.setState({dappTokenBalance:dappTokenBalance.toString()});_context2.next=30;break;case 29:window.alert('DappToken contract not deployed to detected network.');case 30:// Load TokenFarm\ntokenFarmData=TokenFarm.networks[networkId];if(!tokenFarmData){_context2.next=40;break;}tokenFarm=new web3.eth.Contract(TokenFarm.abi,tokenFarmData.address);this.setState({tokenFarm:tokenFarm});_context2.next=36;return tokenFarm.methods.stakingBalance(this.state.account).call();case 36:stakingBalance=_context2.sent;this.setState({stakingBalance:stakingBalance.toString()});_context2.next=41;break;case 40:window.alert('TokenFarm contract not deployed to detected network.');case 41:this.setState({loading:false});case 42:case\"end\":return _context2.stop();}}},_callee2,this);}));function loadBlockchainData(){return _loadBlockchainData.apply(this,arguments);}return loadBlockchainData;}()},{key:\"loadWeb3\",value:function(){var _loadWeb=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!window.ethereum){_context3.next=6;break;}window.web3=new Web3(window.ethereum);_context3.next=4;return window.ethereum.enable();case 4:_context3.next=7;break;case 6:if(window.web3){window.web3=new Web3(window.web3.currentProvider);}else{window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');}case 7:case\"end\":return _context3.stop();}}},_callee3);}));function loadWeb3(){return _loadWeb.apply(this,arguments);}return loadWeb3;}()},{key:\"render\",value:function render(){var content;if(this.state.loading){content=/*#__PURE__*/React.createElement(\"p\",{id:\"loader\",className:\"text-center\"},\"Loading...\");}else{content=/*#__PURE__*/React.createElement(Main,{daiTokenBalance:this.state.daiTokenBalance,dappTokenBalance:this.state.dappTokenBalance,stakingBalance:this.state.stakingBalance,stakeTokens:this.stakeTokens,unstakeTokens:this.unstakeTokens});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navbar,{account:this.state.account}),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"main\",{role:\"main\",className:\"col-lg-12 ml-auto mr-auto\",style:{maxWidth:'600px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"content mr-auto ml-auto\"},/*#__PURE__*/React.createElement(\"a\",{href:\"http://www.dappuniversity.com/bootcamp\",target:\"_blank\",rel:\"noopener noreferrer\"}),content)))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/VASILISVITTIS/Documents/main/src/components/App.js"],"names":["React","Component","Web3","DaiToken","DappToken","TokenFarm","Navbar","Main","App","props","stakeTokens","amount","setState","loading","state","daiToken","methods","approve","tokenFarm","_address","send","from","account","on","hash","unstakeTokens","dappToken","daiTokenBalance","dappTokenBalance","stakingBalance","loadWeb3","loadBlockchainData","web3","window","eth","getAccounts","accounts","net","getId","networkId","daiTokenData","networks","Contract","abi","address","balanceOf","call","toString","alert","dappTokenData","tokenFarmData","ethereum","enable","currentProvider","content","maxWidth"],"mappings":"28BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,IAAP,KAAiB,MAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAO,WAAP,C,GAEMC,CAAAA,G,0FAgFJ,aAAYC,KAAZ,CAAmB,qCACjB,uBAAMA,KAAN,EADiB,MAhBnBC,WAgBmB,CAhBL,SAACC,MAAD,CAAY,CACxB,MAAKC,QAAL,CAAc,CAAEC,OAAO,CAAE,IAAX,CAAd,EACA,MAAKC,KAAL,CAAWC,QAAX,CAAoBC,OAApB,CAA4BC,OAA5B,CAAoC,MAAKH,KAAL,CAAWI,SAAX,CAAqBC,QAAzD,CAAmER,MAAnE,EAA2ES,IAA3E,CAAgF,CAAEC,IAAI,CAAE,MAAKP,KAAL,CAAWQ,OAAnB,CAAhF,EAA8GC,EAA9G,CAAiH,iBAAjH,CAAoI,SAACC,IAAD,CAAU,CAC5I,MAAKV,KAAL,CAAWI,SAAX,CAAqBF,OAArB,CAA6BN,WAA7B,CAAyCC,MAAzC,EAAiDS,IAAjD,CAAsD,CAAEC,IAAI,CAAE,MAAKP,KAAL,CAAWQ,OAAnB,CAAtD,EAAoFC,EAApF,CAAuF,iBAAvF,CAA0G,SAACC,IAAD,CAAU,CAClH,MAAKZ,QAAL,CAAc,CAAEC,OAAO,CAAE,KAAX,CAAd,EACD,CAFD,EAGD,CAJD,EAKD,CASkB,OAPnBY,aAOmB,CAPH,SAACd,MAAD,CAAY,CAC1B,MAAKC,QAAL,CAAc,CAAEC,OAAO,CAAE,IAAX,CAAd,EACA,MAAKC,KAAL,CAAWI,SAAX,CAAqBF,OAArB,CAA6BS,aAA7B,GAA6CL,IAA7C,CAAkD,CAAEC,IAAI,CAAE,MAAKP,KAAL,CAAWQ,OAAnB,CAAlD,EAAgFC,EAAhF,CAAmF,iBAAnF,CAAsG,SAACC,IAAD,CAAU,CAC9G,MAAKZ,QAAL,CAAc,CAAEC,OAAO,CAAE,KAAX,CAAd,EACD,CAFD,EAGD,CAEkB,CAEjB,MAAKC,KAAL,CAAa,CACXQ,OAAO,CAAE,KADE,CAEXP,QAAQ,CAAE,EAFC,CAGXW,SAAS,CAAE,EAHA,CAIXR,SAAS,CAAE,EAJA,CAKXS,eAAe,CAAE,GALN,CAMXC,gBAAgB,CAAE,GANP,CAOXC,cAAc,CAAE,GAPL,CAQXhB,OAAO,CAAE,IARE,CAAb,CAFiB,aAYlB,C,6IA1FD,yJACQ,MAAKiB,QAAL,EADR,8BAEQ,MAAKC,kBAAL,EAFR,4D,6OAKA,0RACQC,IADR,CACeC,MAAM,CAACD,IADtB,wBAGyBA,CAAAA,IAAI,CAACE,GAAL,CAASC,WAAT,EAHzB,QAGQC,QAHR,gBAIE,KAAKxB,QAAL,CAAc,CAAEU,OAAO,CAAEc,QAAQ,CAAC,CAAD,CAAnB,CAAd,EAJF,uBAM0BJ,CAAAA,IAAI,CAACE,GAAL,CAASG,GAAT,CAAaC,KAAb,EAN1B,QAMQC,SANR,gBAQE;AACMC,YATR,CASuBrC,QAAQ,CAACsC,QAAT,CAAkBF,SAAlB,CATvB,KAUKC,YAVL,2BAWUzB,QAXV,CAWqB,GAAIiB,CAAAA,IAAI,CAACE,GAAL,CAASQ,QAAb,CAAsBvC,QAAQ,CAACwC,GAA/B,CAAoCH,YAAY,CAACI,OAAjD,CAXrB,CAYI,KAAKhC,QAAL,CAAc,CAAEG,QAAQ,CAARA,QAAF,CAAd,EAZJ,wBAagCA,CAAAA,QAAQ,CAACC,OAAT,CAAiB6B,SAAjB,CAA2B,KAAK/B,KAAL,CAAWQ,OAAtC,EAA+CwB,IAA/C,EAbhC,SAaQnB,eAbR,gBAcI,KAAKf,QAAL,CAAc,CAAEe,eAAe,CAAEA,eAAe,CAACoB,QAAhB,EAAnB,CAAd,EAdJ,gCAgBId,MAAM,CAACe,KAAP,CAAa,qDAAb,EAhBJ,QAmBE;AACMC,aApBR,CAoBwB7C,SAAS,CAACqC,QAAV,CAAmBF,SAAnB,CApBxB,KAqBKU,aArBL,2BAsBUvB,SAtBV,CAsBsB,GAAIM,CAAAA,IAAI,CAACE,GAAL,CAASQ,QAAb,CAAsBtC,SAAS,CAACuC,GAAhC,CAAqCM,aAAa,CAACL,OAAnD,CAtBtB,CAuBI,KAAKhC,QAAL,CAAc,CAAEc,SAAS,CAATA,SAAF,CAAd,EAvBJ,wBAwBiCA,CAAAA,SAAS,CAACV,OAAV,CAAkB6B,SAAlB,CAA4B,KAAK/B,KAAL,CAAWQ,OAAvC,EAAgDwB,IAAhD,EAxBjC,SAwBQlB,gBAxBR,gBAyBI,KAAKhB,QAAL,CAAc,CAAEgB,gBAAgB,CAAEA,gBAAgB,CAACmB,QAAjB,EAApB,CAAd,EAzBJ,gCA2BId,MAAM,CAACe,KAAP,CAAa,sDAAb,EA3BJ,QA8BE;AACME,aA/BR,CA+BwB7C,SAAS,CAACoC,QAAV,CAAmBF,SAAnB,CA/BxB,KAgCKW,aAhCL,2BAiCUhC,SAjCV,CAiCsB,GAAIc,CAAAA,IAAI,CAACE,GAAL,CAASQ,QAAb,CAAsBrC,SAAS,CAACsC,GAAhC,CAAqCO,aAAa,CAACN,OAAnD,CAjCtB,CAkCI,KAAKhC,QAAL,CAAc,CAAEM,SAAS,CAATA,SAAF,CAAd,EAlCJ,wBAmC+BA,CAAAA,SAAS,CAACF,OAAV,CAAkBa,cAAlB,CAAiC,KAAKf,KAAL,CAAWQ,OAA5C,EAAqDwB,IAArD,EAnC/B,SAmCQjB,cAnCR,gBAoCI,KAAKjB,QAAL,CAAc,CAAEiB,cAAc,CAAEA,cAAc,CAACkB,QAAf,EAAlB,CAAd,EApCJ,gCAsCId,MAAM,CAACe,KAAP,CAAa,sDAAb,EAtCJ,QAyCE,KAAKpC,QAAL,CAAc,CAAEC,OAAO,CAAE,KAAX,CAAd,EAzCF,8D,wNA4CA,4IACMoB,MAAM,CAACkB,QADb,0BAEIlB,MAAM,CAACD,IAAP,CAAc,GAAI9B,CAAAA,IAAJ,CAAS+B,MAAM,CAACkB,QAAhB,CAAd,CAFJ,uBAGUlB,CAAAA,MAAM,CAACkB,QAAP,CAAgBC,MAAhB,EAHV,sCAKO,GAAInB,MAAM,CAACD,IAAX,CAAiB,CACpBC,MAAM,CAACD,IAAP,CAAc,GAAI9B,CAAAA,IAAJ,CAAS+B,MAAM,CAACD,IAAP,CAAYqB,eAArB,CAAd,CACD,CAFI,IAGA,CACHpB,MAAM,CAACe,KAAP,CAAa,qEAAb,EACD,CAVH,wD,uGA2CA,iBAAS,CACP,GAAIM,CAAAA,OAAJ,CACA,GAAG,KAAKxC,KAAL,CAAWD,OAAd,CAAuB,CACrByC,OAAO,cAAG,yBAAG,EAAE,CAAC,QAAN,CAAe,SAAS,CAAC,aAAzB,eAAV,CACD,CAFD,IAEO,CACLA,OAAO,cAAG,oBAAC,IAAD,EACN,eAAe,CAAE,KAAKxC,KAAL,CAAWa,eADtB,CAEN,gBAAgB,CAAE,KAAKb,KAAL,CAAWc,gBAFvB,CAGN,cAAc,CAAE,KAAKd,KAAL,CAAWe,cAHrB,CAIN,WAAW,CAAE,KAAKnB,WAJZ,CAKN,aAAa,CAAE,KAAKe,aALd,EAAV,CAOD,CAED,mBACI,4CACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,KAAKX,KAAL,CAAWQ,OAA5B,EADF,cAEE,2BAAK,SAAS,CAAC,sBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,4BAAM,IAAI,CAAC,MAAX,CAAkB,SAAS,CAAC,2BAA5B,CAAwD,KAAK,CAAE,CAAEiC,QAAQ,CAAE,OAAZ,CAA/D,eACE,2BAAK,SAAS,CAAC,yBAAf,eACE,yBACI,IAAI,CAAC,wCADT,CAEI,MAAM,CAAC,QAFX,CAGI,GAAG,CAAC,qBAHR,EADF,CAQGD,OARH,CADF,CADF,CADF,CAFF,CADJ,CAsBD,C,iBAlIerD,S,EAqIlB,cAAeO,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react'\nimport Web3 from 'web3'\nimport DaiToken from '../abis/DaiToken.json'\nimport DappToken from '../abis/DappToken.json'\nimport TokenFarm from '../abis/TokenFarm.json'\nimport Navbar from './Navbar'\nimport Main from './Main'\nimport './App.css'\n\nclass App extends Component {\n\n  async componentWillMount() {\n    await this.loadWeb3()\n    await this.loadBlockchainData()\n  }\n\n  async loadBlockchainData() {\n    const web3 = window.web3\n\n    const accounts = await web3.eth.getAccounts()\n    this.setState({ account: accounts[0] })\n\n    const networkId = await web3.eth.net.getId()\n\n    // Load DaiToken\n    const daiTokenData = DaiToken.networks[networkId]\n    if(daiTokenData) {\n      const daiToken = new web3.eth.Contract(DaiToken.abi, daiTokenData.address)\n      this.setState({ daiToken })\n      let daiTokenBalance = await daiToken.methods.balanceOf(this.state.account).call()\n      this.setState({ daiTokenBalance: daiTokenBalance.toString() })\n    } else {\n      window.alert('DaiToken contract not deployed to detected network.')\n    }\n\n    // Load DappToken\n    const dappTokenData = DappToken.networks[networkId]\n    if(dappTokenData) {\n      const dappToken = new web3.eth.Contract(DappToken.abi, dappTokenData.address)\n      this.setState({ dappToken })\n      let dappTokenBalance = await dappToken.methods.balanceOf(this.state.account).call()\n      this.setState({ dappTokenBalance: dappTokenBalance.toString() })\n    } else {\n      window.alert('DappToken contract not deployed to detected network.')\n    }\n\n    // Load TokenFarm\n    const tokenFarmData = TokenFarm.networks[networkId]\n    if(tokenFarmData) {\n      const tokenFarm = new web3.eth.Contract(TokenFarm.abi, tokenFarmData.address)\n      this.setState({ tokenFarm })\n      let stakingBalance = await tokenFarm.methods.stakingBalance(this.state.account).call()\n      this.setState({ stakingBalance: stakingBalance.toString() })\n    } else {\n      window.alert('TokenFarm contract not deployed to detected network.')\n    }\n\n    this.setState({ loading: false })\n  }\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      await window.ethereum.enable()\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n    }\n    else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n    }\n  }\n\n  stakeTokens = (amount) => {\n    this.setState({ loading: true })\n    this.state.daiToken.methods.approve(this.state.tokenFarm._address, amount).send({ from: this.state.account }).on('transactionHash', (hash) => {\n      this.state.tokenFarm.methods.stakeTokens(amount).send({ from: this.state.account }).on('transactionHash', (hash) => {\n        this.setState({ loading: false })\n      })\n    })\n  }\n\n  unstakeTokens = (amount) => {\n    this.setState({ loading: true })\n    this.state.tokenFarm.methods.unstakeTokens().send({ from: this.state.account }).on('transactionHash', (hash) => {\n      this.setState({ loading: false })\n    })\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      account: '0x0',\n      daiToken: {},\n      dappToken: {},\n      tokenFarm: {},\n      daiTokenBalance: '0',\n      dappTokenBalance: '0',\n      stakingBalance: '0',\n      loading: true\n    }\n  }\n\n  render() {\n    let content\n    if(this.state.loading) {\n      content = <p id=\"loader\" className=\"text-center\">Loading...</p>\n    } else {\n      content = <Main\n          daiTokenBalance={this.state.daiTokenBalance}\n          dappTokenBalance={this.state.dappTokenBalance}\n          stakingBalance={this.state.stakingBalance}\n          stakeTokens={this.stakeTokens}\n          unstakeTokens={this.unstakeTokens}\n      />\n    }\n\n    return (\n        <div>\n          <Navbar account={this.state.account} />\n          <div className=\"container-fluid mt-5\">\n            <div className=\"row\">\n              <main role=\"main\" className=\"col-lg-12 ml-auto mr-auto\" style={{ maxWidth: '600px' }}>\n                <div className=\"content mr-auto ml-auto\">\n                  <a\n                      href=\"http://www.dappuniversity.com/bootcamp\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                  >\n                  </a>\n\n                  {content}\n\n                </div>\n              </main>\n            </div>\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}